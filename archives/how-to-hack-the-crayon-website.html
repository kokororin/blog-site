<!doctype html><html class="han-la"><head><link rel="manifest" href="/manifest.json"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#16a085"><meta name="description" content="如何黑掉彩笔的网站 (¬_¬)"><meta name="keywords" content="xss"><title>如何黑掉彩笔的网站 (¬_¬) | あかねぞら</title><link rel="icon shortcut" type="image/ico" href="/favicon.ico"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/assets/app.css?v=a0d8a1f883e8f084"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="あかねぞら" type="application/atom+xml"></head><body><div id="pjax-container"><div id="main" class="container"><div id="main-post" role="main" itemscope="" itemtype="http://schema.org/BlogPosting"><article class="post" style="padding-top:20px"><h2 itemprop="name headline" style="font-weight:400">如何黑掉彩笔的网站 (¬_¬)</h2><div class="text-right"><div class="text-bar"><a href="/" class="fui-home"></a><a href="#disqus_thread" class="fui-bubble" data-action="comment-go"></a><a style="font-size:30px;margin-left:1px">·</a><a href="https://twitter.com/intent/tweet?url=https://kotori.love/archives/how-to-hack-the-crayon-website.html" target="_blank" rel="nofollow" data-placement="bottom" data-toggle="tooltip" title="Twitter" class="fui-twitter"></a><a href="https://www.facebook.com/sharer/sharer.php?u=https://kotori.love/archives/how-to-hack-the-crayon-website.html" target="_blank" rel="nofollow" data-placement="bottom" data-toggle="tooltip" title="Facebook" class="fui-facebook"></a></div><div class="post-info"><span class="post-info-n"><a href="/categories/%E7%A7%91%E6%8A%80/">科技</a></span><a href="/tags/xss/">xss</a><a><time datetime="2015-02-05T15:07:00.000Z">2015-02-05</time></a></div></div><div class="post-content" itemprop="articleBody"><blockquote><p>转自 java 吧</p><p><a href="http://tieba.baidu.com/p/3567794788" target="_blank" rel="noopener">http://tieba.baidu.com/p/3567794788</a></p><p>刚才看到吧里有只大彩笔在秀自己的网站：</p><p>原帖地址：<a href="http://jump.bdimg.com/safecheck/index?url=x+Z5mMbGPAs95UolpNuq+CwM2BpViN6QF0BYrUCVRu+Ih3iPb8xNxwdoUcOC1TUKLQ1TKOpWHKLzQbcGOL5wzlvJyuAzzWKJT84Xyxbjh0YT+jGWSf0ix6r+9G21ACi5FCwD+tHScJ0N0JW7pjPTVTA8Zu4mdgY0" target="_blank" rel="noopener">http://tieba.baidu.com/p/3567694132</a></p><p>对于这样热情高涨的新手，我们一定要予以关（nue）照（dai），于是心血来潮，</p><p>科普一下 XSS（Cross Site Scripting）黑站。</p><p>中文叫跨站脚本攻击。</p><p><img src="https://static-files.kotori.love/blog/2015/02/2015-02-5.jpg" alt=""></p></blockquote><p>首先，打开彩笔的目标网站（废话），并注册用户</p><p><img src="https://static-files.kotori.love/blog/2015/02/32_2015-02-5.jpg" alt=""></p><p>寻找一个可以提交字符串到服务器的页面</p><p>并且保证这个字符串会在前台页面显示，比如贴吧的发帖之类的功能</p><p> </p><p><img src="https://static-files.kotori.love/blog/2015/02/41_2015-02-5.jpg" alt=""></p><p>找到 html 标签，我们看到有 maxlength 属性，这里先干掉再说，因为一会我们要提交 js 代码</p><p>这里就可见，web 的前台验证什么的，都是假的，客户端提交的数据，必须要做后台验证。</p><p> </p><p><img src="https://static-files.kotori.love/blog/2015/02/56_2015-02-5.jpg" alt=""></p><p>准备一段 js，代表，这里以简单为主，仅仅测试</p><p> </p><p><img src="https://static-files.kotori.love/blog/2015/02/62_2015-02-5.jpg" alt=""></p><p>粘到文本框里去</p><p> </p><p><img src="https://static-files.kotori.love/blog/2015/02/92_2015-02-5.jpg" alt=""></p><p>提交成功</p><p>看到没？彩笔做的网站，前台框架用得爽，后台验证完全没有，顺利过了</p><p> </p><p><img src="https://static-files.kotori.love/blog/2015/02/87_2015-02-5.jpg" alt=""></p><p>打开相应的显示画面，看到了我们的 js 已经成功被执行</p><p> </p><p><img src="https://static-files.kotori.love/blog/2015/02/18_2015-02-5.jpg" alt=""></p><p>查看一下源代码，我们的 js 已经被嵌入了 html</p><p> </p><p>总结：</p><p>真正的坏人，不会上传一段 alert 那么简单。</p><p>正如名字一样，跨站的意思是，大的脚本不会直接上传，一定是再远程。</p><p>如果，他上传的是如下的代码，你觉得后果会如何？</p><p><img src="https://static-files.kotori.love/blog/2015/02/97_2015-02-5.jpg" alt=""></p><p>防范 xss 的方法，前面已经提到了，用户提交数据的时候，做后台验证是其一。</p><p>其二就是前台展示数据的时候，一定要做代码转义。</p><p>这里隆重推荐，我大微软的 <a href="http://asp.net" target="_blank" rel="noopener">asp.net</a> MVC + razor 真心很强大。</p><p><strong>前台后台验证一条龙，显示转意一句话。</strong></p></div></article></div><center><div id="postnav"><ul class="pager"><li class="previous"><a href="/"><span class="fui-home"></span></a></li><li class="next" data-action="comment-show"><a href="#"><span class="fui-chat"></span></a></li><li class="previous"><a href="/archives/homemade-chrome-theme-love-live.html" title="自制 chrome LOVE LIVE! 主题">自制 chrome LOVE LIVE! 主题</a></li><li class="next"><a href="/archives/posutoba-imitation-baidu-project-completed.html" title="Posutoba（仿百度贴吧）项目大致完成">Posutoba（仿百度贴吧）项目大致完成</a></li></ul></div></center><div id="valine-comments" style="display:none"></div><div class="post-tor-content"><div class="post-tor" id="postTor"><div class="torarc-t"><div class="torarc-tile"></div></div></div></div></div><footer id="footer" class="container" style="background:rgba(255,255,255,0)"><hr><div style="text-align:center;padding-bottom:9px"><p>© 2014 - 2020 <a href="/">あかねぞら</a>. Using <a target="_blank" href="https://hexo.io/">Hexo</a>  &amp; <a target="_blank" href="https://yumoe.com">Moricolor</a> / <a href="/atom.xml" data-nopjax="true">RSS</a></p></div></footer><script id="mori-json" type="text/json">{"bottomTools":{"hitokoto":true,"category":true,"tag":false,"page":true,"search":true},"style":{"color":{"enabled":false,"colors":["#f48fb1","#f48fb1","#f8bbd0"]}},"comment":{"use":"valine","appId":"ikbNNOUhw2U2KuYFXgcfb9GP-MdYXbMMI","appKey":"ggySdQdQ8EC21u2PXS8iOQNp"},"github":"https://github.com/kokororin","analytics":{"use":"google","id":"UA-70944432-1"},"sentry":{"dsn":"https://7bdda1be9b094ef0b6ff3c364024537c@sentry.io/2406563"}}</script><script src="/assets/app.js?v=e61db048b83c8a79"></script></div></body></html>