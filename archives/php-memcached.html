<!doctype html><html class="han-la"><head><link rel="manifest" href="/manifest.json"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#16a085"><meta name="description" content="初探 memcached"><meta name="keywords" content="php,memcached,homebrew"><title>初探 memcached | あかね空</title><link rel="icon shortcut" type="image/ico" href="/favicon.ico"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/assets/app.css?v=775bb307e8087fad"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="あかね空" type="application/atom+xml"></head><body><div id="pjax-container"><div id="main" class="container"><div id="main-post" role="main" itemscope="" itemtype="http://schema.org/BlogPosting"><article class="post" style="padding-top:20px"><h2 itemprop="name headline" style="font-weight:400">初探 memcached</h2><div class="text-right"><div class="text-bar"><a href="/" class="fui-home"></a><a href="#disqus_thread" class="fui-bubble" data-action="comment-go"></a><a style="font-size:30px;margin-left:1px">·</a><a href="https://twitter.com/intent/tweet?url=https://kotori.love/archives/php-memcached.html" target="_blank" rel="nofollow" data-placement="bottom" data-toggle="tooltip" title="Twitter" class="fui-twitter"></a><a href="https://www.facebook.com/sharer/sharer.php?u=https://kotori.love/archives/php-memcached.html" target="_blank" rel="nofollow" data-placement="bottom" data-toggle="tooltip" title="Facebook" class="fui-facebook"></a></div><div class="post-info"><span class="post-info-n"><a href="/categories/%E7%A7%91%E6%8A%80/">科技</a></span><a href="/tags/php/">php</a><a href="/tags/memcached/">memcached</a><a href="/tags/homebrew/">homebrew</a><a><time datetime="2016-04-11T11:03:00.000Z">2016-04-11</time></a></div></div><div class="post-content" itemprop="articleBody"><blockquote><p>因为公司下一个项目要用到 Memcached 集群，所以学习下。。。</p></blockquote><h3 id="安装">安装</h3><pre class="language-bash"><code class="language-bash">brew <span class="token function">install</span> memcached
<span class="token function">cp</span> /usr/local/Cellar/memcached/1.4.24/homebrew.mxcl.memcached.plist ~/Library/LaunchAgents
launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.memcached.plist
</code></pre><h3 id="参数解释">参数解释</h3><pre class="language-bash"><code class="language-bash">/usr/bin/memcached -d -m <span class="token number">128</span> -l <span class="token number">192.168</span>.1.1 -p <span class="token number">11211</span> -u httpd
</code></pre><pre><code>-p 监听的端口
-l 连接的IP地址, 默认是本机
-d start 启动memcached服务
-d restart 重起memcached服务
-d stop|shutdown 关闭正在运行的memcached服务
-d install 安装memcached服务
-d uninstall 卸载memcached服务
-u 以的身份运行 (仅在以root运行的时候有效)
-m 最大内存使用，单位MB。默认64MB
-M 内存耗尽时返回错误，而不是删除项
-c 最大同时连接数，默认是1024
-f 块大小增长因子，默认是1.25
-n 最小分配空间，key+value+flags默认是48
-h 显示帮助
</code></pre><h3 id="查看状态">查看状态</h3><pre class="language-bash"><code class="language-bash">telnet <span class="token number">127.0</span>.0.1 <span class="token number">11211</span>
stats
</code></pre><p>这些状态的说明如下：</p><table><thead><tr><th>参数名</th><th>描述</th></tr></thead><tbody><tr><td>pid</td><td>memcache 服务器的进程 ID</td></tr><tr><td>uptime</td><td>服务器已经运行的秒数</td></tr><tr><td>time</td><td>服务器当前的 unix 时间戳</td></tr><tr><td>version</td><td>memcache 版本</td></tr><tr><td>pointer_size</td><td>当前操作系统的指针大小（32 位系统一般是 32bit）</td></tr><tr><td>rusage_user</td><td>进程的累计用户时间</td></tr><tr><td>rusage_system</td><td>进程的累计系统时间</td></tr><tr><td>curr_items</td><td>服务器当前存储的 items 数量</td></tr><tr><td>total_items</td><td>从服务器启动以后存储的 items 总数量</td></tr><tr><td>bytes</td><td>当前服务器存储 items 占用的字节数</td></tr><tr><td>curr_connections</td><td>当前打开着的连接数</td></tr><tr><td>total_connections</td><td>从服务器启动以后曾经打开过的连接数</td></tr><tr><td>connection_structures</td><td>服务器分配的连接构造数</td></tr><tr><td>cmd_get</td><td>get 命令（获取）总请求次数</td></tr><tr><td>cmd_set</td><td>set 命令（保存）总请求次数</td></tr><tr><td>get_hits</td><td>总命中次数</td></tr><tr><td>get_misses</td><td>总未命中次数</td></tr><tr><td>evictions</td><td>为获取空闲内存而删除的 items 数（分配给 memcache 的空间用满后需要删除旧的 items 来得到空间分配给新的 items）</td></tr><tr><td>bytes_read</td><td>总读取字节数（请求字节数）</td></tr><tr><td>bytes_written</td><td>总发送字节数（结果字节数）</td></tr><tr><td>limit_maxbytes</td><td>分配给 memcache 的内存大小（字节）</td></tr><tr><td>threads</td><td>当前线程数</td></tr></tbody></table><h3 id="安装-配置php扩展">安装 &amp; 配置 php 扩展</h3><pre class="language-bash"><code class="language-bash">brew <span class="token function">install</span> homebrew/php/php56-memcached 
php-fpm.restart 
</code></pre><p>查看 phpinfo，可以看到配置成功<br><img src="https://static-files.kotori.love/blog/2016/04/214175390.png" alt="954B3550-F804-4CDF-8E46-743F40D90BF0.png"></p><h3 id="未完待续">未完待续</h3></div></article></div><center><div id="postnav"><ul class="pager"><li class="previous"><a href="/"><span class="fui-home"></span></a></li><li class="next" data-action="comment-show"><a href="#"><span class="fui-chat"></span></a></li><li class="previous"><a href="/archives/react-native-es5-es6-difference.html" title="React/React Native 的 ES5 ES6 写法对照表">React/React Native 的 ES5 ES6 写法对照表</a></li><li class="next"><a href="/archives/google-chrome-new-ui-solution.html" title="解决新版 Chrome 被强制显示的扩展图标">解决新版 Chrome 被强制显示的扩展图标</a></li></ul></div></center><div id="disqus_thread" data-title="初探 memcached" data-permalink="https://kotori.love/archives/php-memcached.html"></div><div class="post-tor-content"><div class="post-tor" id="postTor"><div class="torarc-t"><div class="torarc-tile"><a href="#main-post"><span class="tori">- TOC -</span></a><br><a href="#安装"><span class="tori">安装</span><br></a><a href="#参数解释"><span class="tori">参数解释</span><br></a><a href="#查看状态"><span class="tori">查看状态</span><br></a><a href="#安装-配置php扩展"><span class="tori">安装 &amp; 配置 php 扩展</span><br></a><a href="#未完待续"><span class="tori">未完待续</span><br></a></div></div></div></div></div><footer id="footer" class="container" style="background:rgba(255,255,255,0)"><hr><div style="text-align:center;padding-bottom:9px"><p>© 2014 - 2020 <a href="/">あかね空</a>. Using <a target="_blank" href="https://hexo.io/">Hexo</a>  &amp; <a target="_blank" href="https://yumoe.com">Moricolor</a> / <a href="/atom.xml" data-nopjax="true">RSS</a></p></div></footer><script id="mori-json" type="text/json">{"bottomTools":{"hitokoto":true,"category":true,"tag":false,"search":true},"comment":{"use":"disqus","shortname":"sora-diary"},"analytics":{"use":"google","id":"UA-70944432-1"},"sentry":{"dsn":"https://7bdda1be9b094ef0b6ff3c364024537c@sentry.io/2406563"},"url":"https://kotori.love"}</script><script src="/assets/app.js?v=c37fee7c7025be8c"></script></div></body></html>