<!DOCTYPE html>
<html class="han-la">
  <head>
    <meta charset="utf-8">
    <!-- Meta & Title & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="theme-color" content="#16a085">
<!-- Blue #448AFF -->
<!-- Title -->

<title>React/React Native 的ES5 ES6写法对照表 | ことりのおやつにしてやるぞー！</title>

<!-- Favicons -->
<link rel="icon shortcut" type="image/ico" href="/favicon.ico">
<link rel="icon" href="/favicon.ico">


    <!-- Import CSS -->
    
<link rel="stylesheet" href="/css/mori.css">

    
<link rel="stylesheet" href="/css/vendor/bootstrap/css/bootstrap.min.css">

    
<link rel="stylesheet" href="/css/flat-ui.min.css">

    
<link rel="stylesheet" href="/css/prism.css">

    
<link rel="stylesheet" href="/fonts/md/css/material-design-iconic-font.min.css">

    
<link rel="stylesheet" href="/js/zoom-js/css/zoom.css">


    <!-- RSS -->
    


<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="ことりのおやつにしてやるぞー！" type="application/atom+xml">
</head>

<body>
  

  <div id="main" class="container">
  <div id="main-post" role="main" itemscope itemtype="http://schema.org/BlogPosting" style="display: none;">
    <article class="post" style="padding-top: 20px;">
      <h2 itemprop="name headline" style="font-weight: normal;">React/React Native 的ES5 ES6写法对照表</h2>
      <div class="text-right">
        <div class="text-bar">
          <a href="http://kotori.love" class="fui-home"></a>
          <!-- <a id="tor_show" href="javascript:void(0)" class="fui-list-bulleted"></a> -->
          <a id="comment_go" href="#comments" class="fui-bubble"></a>
          <a style="font-size: 30px;margin-left: 1px;">·</a>
          <a href="https://twitter.com/intent/tweet?url=http://kotori.love/archives/react-native-es5-es6-difference.html" target="_blank" rel="nofollow"
            data-placement="bottom" data-toggle="tooltip" title="Twitter" class="fui-twitter"></a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=http://kotori.love/archives/react-native-es5-es6-difference.html" target="_blank" rel="nofollow"
            data-placement="bottom" data-toggle="tooltip" title="Facebook" class="fui-facebook"></a>
          <a href="https://plus.google.com/share?url=http://kotori.love/archives/react-native-es5-es6-difference.html" target="_blank" rel="nofollow"
            data-placement="bottom" data-toggle="tooltip" title="Google+" class="fui-google-plus"></a>
          <a href="http://service.weibo.com/share/share.php?url=http://kotori.love/archives/react-native-es5-es6-difference.html&title=React/React Native 的ES5 ES6写法对照表"
            target="_blank" rel="nofollow" data-placement="bottom" data-toggle="tooltip" title="Weibo"
            class="fui-bookmark"></a>
        </div>
        <div class="post-info">
          <span class="post-info-n">
            
            <a href="/categories/%E7%A7%91%E6%8A%80/">科技</a>
            
          </span>
          
          <a href="/tags/react/">react</a>
          
          <a><time datetime="2016-07-13T08:22:00.000Z">2016-07-13</time></a>
        </div>
      </div>
      <!-- 头图 -->
      <!-- end -->
      <div class="post-content" itemprop="articleBody">
        <h3 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h3><h4 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h4><p>在ES5里，如果使用CommonJS标准，引入React包基本通过require进行，代码类似这样：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES5</span></span>
<span class="line"><span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"react"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> <span class="token punctuation">{</span></span>
<span class="line">    Component<span class="token punctuation">,</span></span>
<span class="line">    PropTypes</span>
<span class="line"><span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//引用React抽象组件</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> ReactNative <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"react-native"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> <span class="token punctuation">{</span></span>
<span class="line">    Image<span class="token punctuation">,</span></span>
<span class="line">    Text<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token operator">=</span> ReactNative<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//引用具体的React Native组件</span></span></pre><div class="tools"></div></figure>
<p>在ES6里，import写法更为标准</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES6</span></span>
<span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> </span>
<span class="line">    Component<span class="token punctuation">,</span></span>
<span class="line">    PropTypes<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span></span>
<span class="line">    Image<span class="token punctuation">,</span></span>
<span class="line">    Text</span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span></span></pre><div class="tools"></div></figure>
<p>注意在React Native里，import直到0.12+才能正常运作。</p>
<h4 id="导出单个类"><a href="#导出单个类" class="headerlink" title="导出单个类"></a>导出单个类</h4><p>在ES5里，要导出一个类给别的模块用，一般通过<code>module.exports</code>来导出</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES5</span></span>
<span class="line"><span class="token keyword">var</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyComponent<span class="token punctuation">;</span></span></pre><div class="tools"></div></figure>
<p>在ES6里，通常用export default来实现相同的功能：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES6</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line"><span class="token punctuation">}</span></span></pre><div class="tools"></div></figure>
<p>引用的时候也类似：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES5</span></span>
<span class="line"><span class="token keyword">var</span> MyComponent <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./MyComponent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment" spellcheck="true">//ES6</span></span>
<span class="line"><span class="token keyword">import</span> MyComponent <span class="token keyword">from</span> <span class="token string">'./MyComponent'</span><span class="token punctuation">;</span></span></pre><div class="tools"></div></figure>
<h3 id="定义组件"><a href="#定义组件" class="headerlink" title="定义组件"></a>定义组件</h3><p>在ES5里，通常通过React.createClass来定义一个组件类，像这样：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES5</span></span>
<span class="line"><span class="token keyword">var</span> Photo <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    render<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>Image source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>source<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></pre><div class="tools"></div></figure>
<p>在ES6里，我们通过定义一个继承自React.Component的class来定义一个组件类，像这样：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES6</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Photo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>Image source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>source<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span></pre><div class="tools"></div></figure>
<h4 id="给组件定义方法"><a href="#给组件定义方法" class="headerlink" title="给组件定义方法"></a>给组件定义方法</h4><p>从上面的例子里可以看到，给组件定义方法不再用 名字: function()的写法，而是直接用名字()，在方法的最后也不能有逗号了。</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES5 </span></span>
<span class="line"><span class="token keyword">var</span> Photo <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    componentWillMount<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    render<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>Image source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>source<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment" spellcheck="true">//ES6</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Photo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>Image source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>source<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span></pre><div class="tools"></div></figure>
<h4 id="定义组件的属性类型和默认属性"><a href="#定义组件的属性类型和默认属性" class="headerlink" title="定义组件的属性类型和默认属性"></a>定义组件的属性类型和默认属性</h4><p>在ES5里，属性类型和默认属性分别通过propTypes成员和getDefaultProps方法来实现</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES5 </span></span>
<span class="line"><span class="token keyword">var</span> Video <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    getDefaultProps<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">            autoPlay<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">            maxLoops<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    propTypes<span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">        autoPlay<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">        maxLoops<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">        posterFrameSrc<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">        videoSrc<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    render<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>View <span class="token operator">/</span><span class="token operator">></span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></pre><div class="tools"></div></figure>
<p>在ES6里，可以统一使用static成员来实现</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES6</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Video</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        autoPlay<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">        maxLoops<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 注意这里有分号</span></span>
<span class="line">    <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        autoPlay<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">        maxLoops<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">        posterFrameSrc<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">        videoSrc<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 注意这里有分号</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>View <span class="token operator">/</span><span class="token operator">></span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// 注意这里既没有分号也没有逗号</span></span>
<span class="line"><span class="token punctuation">}</span></span></pre><div class="tools"></div></figure>
<p>也有人这么写，虽然不推荐，但读到代码的时候你应当能明白它的意思：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES6</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Video</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>View <span class="token operator">/</span><span class="token operator">></span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">Video<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    autoPlay<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">    maxLoops<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">Video<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    autoPlay<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">    maxLoops<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">    posterFrameSrc<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">    videoSrc<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span></pre><div class="tools"></div></figure>
<p>注意: 对React开发者而言，static成员在IE10及之前版本不能被继承，而在IE11和其它浏览器上可以，这有时候会带来一些问题。React Native开发者可以不用担心这个问题。</p>
<h3 id="初始化STATE"><a href="#初始化STATE" class="headerlink" title="初始化STATE"></a>初始化STATE</h3><p>ES5下情况类似，</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES5 </span></span>
<span class="line"><span class="token keyword">var</span> Video <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    getInitialState<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">            loopsRemaining<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>maxLoops<span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></pre><div class="tools"></div></figure>
<p>ES6下，有两种写法：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES6</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Video</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span></span>
<span class="line">    state <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        loopsRemaining<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>maxLoops<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span></pre><div class="tools"></div></figure>
<p>不过我们推荐更易理解的在构造函数中初始化（这样你还可以根据需要做一些计算）：</p>
<pre><code>//ES6
class Video extends React.Component {
    constructor(props){
        super(props);
        this.state = {
            loopsRemaining: this.props.maxLoops,
        };
    }
}</code></pre><h3 id="把方法作为回调提供"><a href="#把方法作为回调提供" class="headerlink" title="把方法作为回调提供"></a>把方法作为回调提供</h3><p>很多习惯于ES6的用户反而不理解在ES5下可以这么做：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES5</span></span>
<span class="line"><span class="token keyword">var</span> PostInfo <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    handleOptionsButtonClick<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment" spellcheck="true">// Here, 'this' refers to the component instance.</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>showOptionsModal<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    render<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>TouchableHighlight onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleOptionsButtonClick<span class="token punctuation">}</span><span class="token operator">></span></span>
<span class="line">                <span class="token operator">&lt;</span>Text<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>label<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>TouchableHighlight<span class="token operator">></span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></pre><div class="tools"></div></figure>
<p>在ES5下，React.createClass会把所有的方法都bind一遍，这样可以提交到任意的地方作为回调函数，而this不会变化。但官方现在逐步认为这反而是不标准、不易理解的。</p>
<p>在ES6下，你需要通过bind来绑定this引用，或者使用箭头函数（它会绑定当前scope的this引用）来调用</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//ES6</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">PostInfo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">handleOptionsButtonClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>showOptionsModal<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>TouchableHighlight </span>
<span class="line">                onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleOptionsButtonClick<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">                onPress<span class="token operator">=</span><span class="token punctuation">{</span>e<span class="token operator">=</span><span class="token operator">></span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleOptionsButtonClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">></span></span>
<span class="line">                <span class="token operator">&lt;</span>Text<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>label<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>TouchableHighlight<span class="token operator">></span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span></pre><div class="tools"></div></figure>
<p>箭头函数实际上是在这里定义了一个临时的函数，箭头函数的箭头=&gt;之前是一个空括号、单个的参数名、或用括号括起的多个参数名，而箭头之后可以是一个表达式（作为函数的返回值），或者是用花括号括起的函数体（需要自行通过return来返回值，否则返回的是undefined）。</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">// 箭头函数的例子</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token number">1</span></span>
<span class="line">v<span class="token operator">=</span><span class="token operator">></span>v<span class="token operator">+</span><span class="token number">1</span></span>
<span class="line"><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span>a<span class="token operator">+</span>b</span>
<span class="line"><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">e<span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">1000</span><span class="token operator">/</span>e<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span></pre><div class="tools"></div></figure>
<p>需要注意的是，不论是bind还是箭头函数，每次被执行都返回的是一个新的函数引用，因此如果你还需要函数的引用去做一些别的事情（譬如卸载监听器），那么你必须自己保存这个引用</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">// 错误的做法</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">PauseMenu</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        AppStateIOS<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onAppPaused<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">componentDidUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        AppStateIOS<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onAppPaused<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">onAppPaused</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment" spellcheck="true">// 正确的做法</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">PauseMenu</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>_onAppPaused <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onAppPaused<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        AppStateIOS<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_onAppPaused<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">componentDidUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        AppStateIOS<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_onAppPaused<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">onAppPaused</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span></pre><div class="tools"></div></figure>
<p>从这个帖子中我们还学习到一种新的做法：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">// 正确的做法</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">PauseMenu</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        AppStateIOS<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onAppPaused<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">componentDidUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        AppStateIOS<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onAppPaused<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    onAppPaused <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment" spellcheck="true">//把方法直接作为一个arrow function的属性来定义，初始化的时候就绑定好了this指针</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span></pre><div class="tools"></div></figure>
<h3 id="Mixins"><a href="#Mixins" class="headerlink" title="Mixins"></a>Mixins</h3><p>在ES5下，我们经常使用mixin来为我们的类添加一些新的方法，譬如PureRenderMixin</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token keyword">var</span> PureRenderMixin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-addons-pure-render-mixin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  mixins<span class="token punctuation">:</span> <span class="token punctuation">[</span>PureRenderMixin<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">  render<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>className<span class="token punctuation">}</span><span class="token operator">></span>foo<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></pre><div class="tools"></div></figure>
<p>然而现在官方已经不再打算在ES6里继续推行Mixin，他们说：Mixins Are Dead. Long Live Composition。</p>
<p>尽管如果要继续使用mixin，还是有一些第三方的方案可以用，譬如这个方案</p>
<p>不过官方推荐，对于库编写者而言，应当尽快放弃Mixin的编写方式，上文中提到Sebastian Markbåge的一段代码推荐了一种新的编码方式：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token comment" spellcheck="true">//Enhance.js</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"React"</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">var</span> Enhance <span class="token operator">=</span> ComposedComponent <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token string">'Hello'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token operator">&lt;</span>ComposedComponent <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span> data<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment" spellcheck="true">//HigherOrderComponent.js</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Enhance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./Enhance"</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Waiting<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">Enhance</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Enhanced component</span></span></pre><div class="tools"></div></figure>
<p>用一个“增强函数”，来某个类增加一些方法，并且返回一个新类，这无疑能实现mixin所实现的大部分需求。</p>
<h3 id="ES6-带来的其它好处"><a href="#ES6-带来的其它好处" class="headerlink" title="ES6+带来的其它好处"></a>ES6+带来的其它好处</h3><h4 id="解构-amp-属性延展"><a href="#解构-amp-属性延展" class="headerlink" title="解构&amp;属性延展"></a>解构&amp;属性延展</h4><p>结合使用ES6+的解构和属性延展，我们给孩子传递一批属性更为方便了。这个例子把className以外的所有属性传递给div标签：</p>
<figure class="highlight code" data-language="Javascript"><pre class="language-javascript"><span class="line"><span class="token keyword">class</span> <span class="token class-name">AutoloadingPostsGrid</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">var</span> <span class="token punctuation">{</span></span>
<span class="line">            className<span class="token punctuation">,</span></span>
<span class="line">            <span class="token operator">...</span>others<span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// contains all properties of this.props except for className</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span><span class="token operator">></span></span>
<span class="line">                <span class="token operator">&lt;</span>PostsGrid <span class="token punctuation">{</span><span class="token operator">...</span>others<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></span>
<span class="line">                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleLoadMoreClick<span class="token punctuation">}</span><span class="token operator">></span>Load more<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span></pre><div class="tools"></div></figure>
<p>下面这种写法，则是传递所有属性的同时，用覆盖新的className值：</p>
<pre><code>&lt;div {...this.props} className=&quot;override&quot;&gt;
    …
&lt;/div&gt;</code></pre><p>这个例子则相反，如果属性中没有包含className，则提供默认的值，而如果属性中已经包含了，则使用属性中的值</p>
<pre><code>&lt;div className=&quot;base&quot; {...this.props}&gt;
    …
&lt;/div&gt;</code></pre><blockquote>
<p>转自<a href="http://bbs.reactnative.cn/topic/15/react-react-native-%E7%9A%84es5-es6%E5%86%99%E6%B3%95%E5%AF%B9%E7%85%A7%E8%A1%A8/2" target="_blank" rel="noopener">http://bbs.reactnative.cn/topic/15/react-react-native-%E7%9A%84es5-es6%E5%86%99%E6%B3%95%E5%AF%B9%E7%85%A7%E8%A1%A8/2</a></p>
</blockquote>

      </div>
    </article>
  </div>

  <center>
    <div id="postnav" style="display: none;">
      <ul class="pager">
        <li class="previous">
          <a href="http://kotori.love">
            <span class="fui-home"></span>
          </a>
        </li>
        <li class="next" id="outcomment">
          <a href="javascript:void(0)">
            <span class="fui-chat"></span>
          </a>
        </li>

        <li class="previous">
          
          <a href="http://kotori.love/archives/react-native-upload.html" title="React Native中的上传">React Native中的上传</a>
          
        </li>

        <li class="next">
          
          <a href="http://kotori.love/archives/php-memcached.html" title="初探memcached">初探memcached</a>
          
        </li>
      </ul>
    </div>
  </center>

  <div id="comments"></div>
  <div id="disqus_thread"></div>

  <!-- <div class="post-tor-content">
    <div class="post-tor" id="postTor" style="display: none;">
      <div class="torarc-t">
        <div class="torarc-tile">
        </div>
      </div>
    </div>
  </div> -->

</div>

<!-- Disqus 用于评论系统 -->

<script type="text/javascript">
  var disqus_config = function () {
    this.page.url = 'http://kotori.love/archives/react-native-es5-es6-difference.html';  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = 'http://kotori.love/archives/react-native-es5-es6-difference.html'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  }
  var d = document;
  var s = d.createElement('script');
  s.src = '//sora-diary.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
</script>


  <footer id="footer" class="container" style="background:rgba(255, 255, 255, 0);display:none;">
  <hr>
  <div style="text-align:center;padding-bottom:9px;">
    <p>&copy; 2020 <a href="http://kotori.love">ことりのおやつにしてやるぞー！</a>.
      Using <a target="_blank" href="https://hexo.io/">Hexo</a> & <a target="_blank"
        href="https://yumoe.com">Moricolor</a>
      / <a href="/atom.xml">RSS</a>
  </div>
</footer>

<!-- jQuery (necessary for Flat UI's JavaScript plugins) -->

<script src="/js/vendor/jquery.min.js"></script>


<script src="/js/zoom-js/js/zoom.js"></script>


<script src="/js/vendor/bootstrap.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<!-- 
<script src="/js/vendor/video.js"></script>
 -->

<script src="/js/flat-ui.min.js"></script>


<script src="/js/prism.js"></script>


<script type="text/javascript">
  function getHitokoto() {
    $.ajax({ url: "https://api.imjad.cn/hitokoto/" }).then(function (response) {
      $("#hitokoto").html("Hitokoto&nbsp; · &nbsp;&nbsp;" + response);
    });
  }

  $(document).ready(function () {
    $("#main-index").fadeIn(800);
    $("#main-archive").fadeIn(800);
    $("#main-post").fadeIn(500);
    $("#postnav").fadeIn(800);
    $("#main-page").fadeIn(500);
    $("#pagenav").fadeIn(800);
    $("#bottomtools").fadeIn(1200);
    if (window.location.hash != '') {
      var i = window.location.hash.indexOf('#comment');
      var ii = window.location.hash.indexOf('#respond-post');
      if (i != '-1' || ii != '-1') {
        $("#comments").fadeIn(1000);
      }
    }
    $("#thatsi").fadeIn(1300);
    $("#footer").css('display', 'block');
    
      // 锚点平滑滚动
      $('a[href*=#],area[href*=#]').click(function () {
        $body = (window.opera) ? (document.compatMode == "CSS1Compat" ? $('html') : $('body')) : $('html,body'); //Opera BUG fixed
        if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname && location.search == this.search) {
          var $target = $(this.hash);
          $target = $target.length && $target || $('[name=' + this.hash.slice(1) + ']');
          if ($target.length) {
            var targetOffset = $target.offset().top;
            $('html,body').animate({
              scrollTop: targetOffset
            },
              1000);
            return false;
          }
        }
      });
    // end
    
  });

  $("#outcomment").click(function () {
    $("#comments").fadeIn(1000);
  });

  $("#comment_go").click(function () {
    $("#comments").fadeIn(1000);
  });

  $("#tor_show").click(function () {
    if ($("#postTor").css('display') == 'none;') {
      $("#postTor").fadeIn(400);
      $("#postTor").css('display', 'inline-block');
    } else {
      $("#postTor").fadeOut(400);
    }
  });
</script>
<script>
  $(function () {
    $('[data-toggle=tooltip]').tooltip();
  });
</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70944432-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70944432-1');
</script>

</body>
</html>
