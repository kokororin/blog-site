!function(){"use strict";var e=80;function t(e){var t=e.getBoundingClientRect(),n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return{top:t.top+n,left:t.left+o}}var n=function(){var n=null,o=null,i=null,r=null,s=null,a=null,d=null;function l(){var l=document.createElement("img");l.onload=function(){n=Number(l.height),o=Number(l.width),(a=document.createElement("div")).className="zoom-img-wrap",a.style.position="absolute",a.style.top=t(s).top+"px",a.style.left=t(s).left+"px",(d=s.cloneNode()).style.visibility="hidden",s.style.width=s.offsetWidth+"px",s.parentNode.replaceChild(d,s),document.body.appendChild(a),a.appendChild(s),s.classList.add("zoom-img"),s.setAttribute("data-action","zoom-out"),(i=document.createElement("div")).className="zoom-overlay",document.body.appendChild(i),function(){s.offsetWidth;var t=o,i=n,a=t/s.width,d=window.innerHeight-e,l=window.innerWidth-e;r=t<l&&i<d?a:t/i<l/d?d/i*a:l/t*a}(),function(){s.offsetWidth;var e=t(s),n=window.pageYOffset+window.innerHeight/2,o=window.innerWidth/2,i=e.top+s.height/2,d=e.left+s.width/2,l=Math.round(n-i),c=Math.round(o-d),u="scale("+r+")",m="translate("+c+"px, "+l+"px) translateZ(0)";s.style.webkitTransform=u,s.style.msTransform=u,s.style.transform=u,a.style.webkitTransform=m,a.style.msTransform=m,a.style.transform=m,document.body.classList.add("zoom-overlay-open")}()},l.src=s.currentSrc||s.src}function c(){if(document.body.classList.remove("zoom-overlay-open"),document.body.classList.add("zoom-overlay-transitioning"),s.style.webkitTransform="",s.style.msTransform="",s.style.transform="",a.style.webkitTransform="",a.style.msTransform="",a.style.transform="",!1 in document.body.style)return u();s.addEventListener("transitionend",u),s.addEventListener("webkitTransitionEnd",u)}function u(){s.removeEventListener("transitionend",u),s.removeEventListener("webkitTransitionEnd",u),a&&a.parentNode&&(s.classList.remove("zoom-img"),s.style.width="",s.setAttribute("data-action","zoom"),d.parentNode.replaceChild(s,d),a.parentNode.removeChild(a),i.parentNode.removeChild(i),document.body.classList.remove("zoom-overlay-transitioning"))}return function(e){return s=e,{zoomImage:l,close:c,dispose:u}}}();(function(){var t=null,o=null,i=null;function r(){window.open(event.target.getAttribute("data-original")||event.target.currentSrc||event.target.src,"_blank")}function s(e){e=e||{forceDispose:!1},t&&(t[e.forceDispose?"dispose":"close"](),window.removeEventListener("scroll",a),document.removeEventListener("keyup",d),document.removeEventListener("click",l),document.removeEventListener("touchstart",c),document.removeEventListener("touchend",l),t=null)}function a(e){null===o&&(o=window.pageYOffset);var t=o-window.pageYOffset;Math.abs(t)>=40&&s()}function d(e){27==e.keyCode&&s()}function l(e){e.stopPropagation(),e.preventDefault(),s()}function c(e){i=e.touches[0].pageY,e.target.addEventListener("touchmove",u)}function u(e){Math.abs(e.touches[0].pageY-i)<=10||(s(),e.target.removeEventListener("touchmove",u))}return{listen:function(){document.body.addEventListener("click",function(o){"zoom"===o.target.getAttribute("data-action")&&"IMG"===o.target.tagName&&function(o){o.stopPropagation(),document.body.classList.contains("zoom-overlay-open")||o.target.width>=window.innerWidth-e||(o.metaKey||o.ctrlKey?r():(s({forceDispose:!0}),(t=n(o.target)).zoomImage(),window.addEventListener("scroll",a),document.addEventListener("click",l),document.addEventListener("keyup",d),document.addEventListener("touchstart",c),document.addEventListener("touchend",l)))}(o)})}}})().listen()}();