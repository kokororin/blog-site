!function(t,o,a){var n=t.mori;if(!n){var e=function(){NProgress.configure({showSpinner:!1})};e.prototype.getHitokoto=function(){a.ajax({url:"https://api.imjad.cn/hitokoto/"}).then(function(t){a("#hitokoto").html("Hitokoto&nbsp; Â· &nbsp;&nbsp;"+t)})},e.prototype.updateLinks=function(){a("a").each(function(t,o){var n=a(o),e=n.attr("href");return!e||(e&&0===e.indexOf(moriVars.url)?(e=""===(e=e.replace(moriVars.url,""))?"/":e,n.attr("href",e),!0):"javascript:"===e.substring(0,11)||"#"===e.substring(0,1)||"/"===e.substring(0,1)||void n.attr("target","_blank"))})},e.prototype.initDom=function(){if(a("#main-index").fadeIn(800),a("#main-archive").fadeIn(800),a("#main-post").fadeIn(500),a("#postnav").fadeIn(800),a("#main-page").fadeIn(500),a("#pagenav").fadeIn(800),a("#bottomtools").fadeIn(1200),""!==t.location.hash){var o=t.location.hash.indexOf("#disqus_thread"),n=t.location.hash.indexOf("#respond-post");-1===o&&-1===n||a("#disqus_thread").fadeIn(1e3)}a("#footer").css("display","block"),a('[data-toggle="tooltip"]').tooltip(),a('[data-toggle="dropdown"]').dropdown(),moriVars.bottomTools.hitokoto&&a("#hitokoto").length>0&&this.getHitokoto()},e.prototype.bindDom=function(){a(o).on("click",'[data-action="comment-show"]',function(){a("#disqus_thread").fadeIn(1e3)}),a(o).on("click",'[data-action="comment-go"]',function(){a("#disqus_thread").fadeIn(1e3)}),a(o).on("click",'[data-action="show-tor"]',function(){"none;"===a(".post-tor").css("display")?(a(".post-tor").fadeIn(400),a(".post-tor").css("display","inline-block")):a(".post-tor").fadeOut(400)}),a(o).on("click","a[href*=#][href!=#],area[href*=#][href!=#]",function(){if($body=t.opera?"CSS1Compat"===o.compatMode?a("html"):a("body"):a("html,body"),location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname&&location.search===this.search){var n=a(this.hash);if((n=n.length&&n||a("[name="+this.hash.slice(1)+"]")).length){var e=n.offset().top;return a("html,body").animate({scrollTop:e},1e3),!1}}})},e.prototype.initDisqus=function(){var n,e;"disqus"===moriVars.comment.use&&a("#disqus_thread").length>0&&"false"!==a("#disqus_thread").attr("data-allow-comment")&&(t.disqus_config=function(){this.page.url=a("#disqus_thread").attr("data-permalink"),this.page.identifier=a("#disqus_thread").attr("data-permalink"),this.page.title=a("#disqus_thread").attr("data-title")},t.DISQUS?DISQUS.reset({reload:!0,config:disqus_config}):((e=(n=o).createElement("script")).src="//"+moriVars.comment.shortname+".disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(n.head||n.body).appendChild(e)))},e.prototype.initPjax=function(){Pjax.isSupported()&&(new Pjax({elements:"a[href]:not([data-nopjax]):not([data-toggle])",selectors:["title","#pjax-container"],cacheBust:!1}),o.addEventListener("pjax:send",function(){n.loadingStart()}),o.addEventListener("pjax:success",function(){gtag&&gtag("config",moriVars.analytics.id,{page_title:o.title,page_path:t.location.pathname+t.location.search}),n.initDom(),n.initDisqus(),n.updateLinks()}),o.addEventListener("pjax:complete",function(){n.loadingEnd()}),t.addEventListener("popstate",function(){n.initDom()}))},e.prototype.loadingStart=function(){NProgress.start()},e.prototype.loadingEnd=function(){setTimeout(NProgress.done,500)},e.prototype.run=function(){this.initDom(),this.bindDom(),this.initDisqus(),this.updateLinks(),o.addEventListener("DOMContentLoaded",function(){n.initPjax()}),this.loadingStart(),o.addEventListener("readystatechange",function(){"complete"===o.readyState&&setTimeout(n.loadingEnd,500)})},(n=new e).run(),t.mori=n}}(window,document,jQuery);