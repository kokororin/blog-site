!function(a,s){var t=a.MORI_INSTANCE,r=a.MORI_VARS,e=a.NProgress,n=a.Pjax;if(!t){function o(t){t&&"string"!=typeof t?this.element=t:(this.element=s.querySelector(t),this.elements=s.querySelectorAll(t),this.length=this.elements.length),this.element||(this.element=s.createElement("mori"),this.length=0)}o.select=function(t){return new o(t)},o.prototype.show=function(){return this.element.style.display="block",this},o.prototype.hide=function(){return this.element.style.display="none",this},o.prototype.html=function(t){return this.element.innerHTML=t,this},o.prototype.addClass=function(t){return this.element.classList.add(t),this},o.prototype.removeClass=function(t){return this.element.classList.remove(t),this},o.prototype.hasClass=function(t){return this.element.classList.contains(t)},o.prototype.css=function(t,e){return e?(this.element.style[t]=e,this):this.element.style[t]},o.prototype.attr=function(t,e){return e?(this.element.setAttribute(t,e),this):this.element.getAttribute(t)},o.prototype.each=function(n){return Array.prototype.forEach.call(this.elements,function(t,e){return n.call(t,t,e)}),this},o.prototype.parent=function(t){for(var e=this.element.parentNode;e!==s;){var n=e;if(-1<e.className.indexOf(t))return o.select(e);if(!n.parentNode)break;e=n.parentNode}return o.select(null)},o.prototype.on=function(t,r,l){return l=l||function(){},this.element.addEventListener(t,function(t){for(var e=this.element.querySelectorAll(r),n=t.target,o=0,i=e.length;o<i;o++)for(var s=n,a=e[o];s&&s!==this.element;){if(s===a)return l.call(a,t,s);s=s.parentNode}}.bind(this)),this},o.prototype.scrollTo=function(){var e=this.element.getBoundingClientRect().top,n=a.pageYOffset,o=e+n,i=+new Date,s=function(){var t=new Date-i;a.scrollTo(0,n+e*(t/500)),s.timer=requestAnimationFrame(s),500<=t&&(a.scrollTo(0,o),cancelAnimationFrame(s.timer))};return requestAnimationFrame(s),this};function i(){e.configure({showSpinner:!1})}i.prototype.getHitokoto=function(){var t=new XMLHttpRequest;t.open("GET","https://api.imjad.cn/hitokoto/"),t.addEventListener("load",function(){o.select("#hitokoto").html("Hitokoto&nbsp; Â· &nbsp;&nbsp;"+t.responseText)}),t.send()},i.prototype.updateLinks=function(){o.select("a").each(function(t){var e=t.getAttribute("href");return!e||(e&&0===e.indexOf(r.url)?(e=""===(e=e.replace(r.url,""))?"/":e,t.href=e,!0):"javascript:"===e.substring(0,11)||"#"===e.substring(0,1)||"/"===e.substring(0,1)||void(t.target="_blank"))})},i.prototype.initDom=function(){""!==a.location.hash&&-1!==a.location.hash.indexOf("#comment")&&o.select("#disqus_thread").show();r.bottomTools.hitokoto&&0<o.select("#hitokoto").length&&this.getHitokoto()},i.prototype.bindDom=function(){o.select(s).on("click",'[data-action="comment-show"]',function(){o.select("#disqus_thread").show()}),o.select(s).on("click",'[data-action="comment-go"]',function(t){t.preventDefault(),o.select("#disqus_thread").show().scrollTo()}),o.select(s).on("click",'[data-toggle="dropdown"]',function(t){t.preventDefault(),t.stopPropagation();var e=o.select(t.target).parent("dropup");e.hasClass("open")?e.removeClass("open"):e.addClass("open")}),o.select(s).on("click","body",function(t){0===o.select(t.target).parent("dropup").length&&o.select(".dropup.open").removeClass("open")})},i.prototype.initDisqus=function(){var t,e;"disqus"===r.comment.use&&0<o.select("#disqus_thread").length&&"false"!==o.select("#disqus_thread").attr("data-allow-comment")&&(a.disqus_config=function(){this.page.url=o.select("#disqus_thread").attr("data-permalink"),this.page.identifier=o.select("#disqus_thread").attr("data-permalink"),this.page.title=o.select("#disqus_thread").attr("data-title")},a.DISQUS?a.DISQUS.reset({reload:!0,config:a.disqus_config}):((e=(t=s).createElement("script")).src="//"+r.comment.shortname+".disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)))},i.prototype.analytics=function(){var t,e,n,o,i;"google"===r.analytics.use&&(e=s,n="ga",(t=a).GoogleAnalyticsObject=n,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=+new Date,o=e.createElement("script"),i=e.getElementsByTagName("script")[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",i.parentNode.insertBefore(o,i),a.ga&&(a.ga("create",r.analytics.id,"auto"),a.ga("send","pageview")))},i.prototype.initPjax=function(){n.isSupported()&&(new n({elements:"a[href]:not([data-nopjax]):not([data-toggle])",selectors:["title","#pjax-container"],cacheBust:!1}),s.addEventListener("pjax:send",function(){t.loadingStart()}),s.addEventListener("pjax:success",function(){a.ga&&a.ga("send","pageview",{page:a.location.pathname+a.location.search,title:s.title}),t.initDom(),t.initDisqus(),t.updateLinks()}),s.addEventListener("pjax:complete",function(){t.loadingEnd()}),a.addEventListener("popstate",function(){t.initDom()}))},i.prototype.loadingStart=function(){e.start()},i.prototype.loadingEnd=function(){setTimeout(e.done,500)},i.prototype.run=function(){this.initDom(),this.bindDom(),this.initDisqus(),this.updateLinks(),s.addEventListener("DOMContentLoaded",function(){t.initPjax()}),this.loadingStart(),s.addEventListener("readystatechange",function(){"complete"===s.readyState&&(setTimeout(t.loadingEnd,500),t.analytics())})},(t=new i).run(),a.MORI_INSTANCE=t}}(window,document);